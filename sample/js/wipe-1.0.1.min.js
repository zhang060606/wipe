/*!wipe-xin  发布日期:2018-11-12*/
var cas=document.getElementById("cas"),context=cas.getContext("2d"),_w=cas.width,_h=cas.height,radius=20,x1=0,y1=0,isMouseDown=!1;function drawRect(e){e.save(),e.beginPath(),e.fillStyle="#666",e.fillRect(0,0,_w,_h),e.globalCompositeOperation="destination-out"}function drawarv(e,t,n){e.save(),e.beginPath(),e.arc(t,n,radius,0,2*Math.PI),e.fillStyle="red",e.fill(),e.restore()}function drawLine(e,t,n,o,a){e.save(),e.lineCap="round",e.beginPath(),e.moveTo(t,n),e.lineTo(o,a),e.lineWidth=2*radius,e.stroke(),e.restore()}function clearRect(e){e.clearRect(0,0,_w,_h)}cas.addEventListener("mousedown",function(e){var t=e||window.event;x1=t.clientX,y1=t.clientY,isMouseDown=!0,drawarv(context,t.clientX,t.clientY)},!1),cas.addEventListener("mousemove",function(e){if(isMouseDown){var t=e||window.event,n=t.clientX,o=t.clientY;drawLine(context,x1,y1,n,o),x1=n,y1=o}},!1),cas.addEventListener("mouseup",function(){var e=0,t=context.getImageData(0,0,_w,_h);console.log(t);for(var n=0;n<_h;n++)for(var o=0;o<_w;o++){var a=4*(_w*n+o)+3;0==t.data[a]&&e++}var i=e/(_w*_h)*100;console.log(Math.round(i)),60<i&&clearRect(context),isMouseDown=!1},!1),window.onload=function(){drawRect(context)};